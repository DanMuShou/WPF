<Window
    x:Class="Chapter11.MainWindow"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:Chapter11"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    Title="MainWindow"
    Width="800"
    Height="450"
    mc:Ignorable="d">

    <Window.Triggers>
        <EventTrigger RoutedEvent="Window.Loaded">
            <BeginStoryboard>
                <Storyboard>
                    <DoubleAnimation
                        Storyboard.TargetName="Ellipse0101"
                        Storyboard.TargetProperty="(Canvas.Left)"
                        To="500"
                        Duration="0:0:5" />
                    <DoubleAnimationUsingKeyFrames Storyboard.TargetName="Ellipse0102" Storyboard.TargetProperty="(Canvas.Left)">
                        <SplineDoubleKeyFrame
                            KeySpline="0.25,0 0.5,0.7"
                            KeyTime="0:0:2.5"
                            Value="250" />
                        <SplineDoubleKeyFrame
                            KeySpline="0.25,0.8 0.2,0.4"
                            KeyTime="0:0:5"
                            Value="500" />
                    </DoubleAnimationUsingKeyFrames>
                    <DoubleAnimationUsingPath
                        PathGeometry="{Binding ElementName=Path1001, Path=Data}"
                        RepeatBehavior="Forever"
                        Source="X"
                        Storyboard.TargetName="Image1001"
                        Storyboard.TargetProperty="(Canvas.Left)"
                        Duration="0:0:5" />
                    <DoubleAnimationUsingPath
                        PathGeometry="{Binding ElementName=Path1001, Path=Data}"
                        RepeatBehavior="Forever"
                        Source="Y"
                        Storyboard.TargetName="Image1001"
                        Storyboard.TargetProperty="(Canvas.Top)"
                        Duration="0:0:5" />
                </Storyboard>
            </BeginStoryboard>
        </EventTrigger>
    </Window.Triggers>


    <Grid>
        <Grid.RowDefinitions>
            <RowDefinition />
            <RowDefinition />
            <RowDefinition />
        </Grid.RowDefinitions>
        <Grid.ColumnDefinitions>
            <ColumnDefinition />
            <ColumnDefinition />
            <ColumnDefinition />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>

        <StackPanel Grid.Row="0" Grid.Column="0">
            <Ellipse
                Width="50"
                Height="50"
                Stretch="Fill">
                <Ellipse.Fill>
                    <RadialGradientBrush GradientOrigin="0.7 0.3" RadiusX="1" RadiusY="1">
                        <GradientStop Offset="0" Color="Wheat" />
                        <GradientStop Offset="1" Color="Blue" />
                    </RadialGradientBrush>
                </Ellipse.Fill>
                <Ellipse.Triggers>
                    <EventTrigger RoutedEvent="Window.Loaded">
                        <BeginStoryboard>
                            <Storyboard>
                                <PointAnimationUsingKeyFrames
                                    AutoReverse="True"
                                    RepeatBehavior="Forever"
                                    Storyboard.TargetProperty="Fill.GradientOrigin">
                                    <LinearPointKeyFrame KeyTime="0:0:0" Value="0.7 0.3" />
                                    <EasingPointKeyFrame KeyTime="0:0:3" Value="0.3 0.7">
                                        <EasingPointKeyFrame.EasingFunction>
                                            <ElasticEase />
                                        </EasingPointKeyFrame.EasingFunction>
                                    </EasingPointKeyFrame>
                                    <DiscretePointKeyFrame KeyTime="0:0:5" Value="0.7 0.7" />
                                    <LinearPointKeyFrame KeyTime="0:0:7" Value="0.3 0.3" />
                                </PointAnimationUsingKeyFrames>
                                <ColorAnimation
                                    AutoReverse="True"
                                    RepeatBehavior="Forever"
                                    Storyboard.TargetProperty=" Fill.GradientStops[1].Color"
                                    To="Black"
                                    Duration="0:0:4" />
                            </Storyboard>
                        </BeginStoryboard>
                    </EventTrigger>
                </Ellipse.Triggers>
            </Ellipse>
        </StackPanel>

        <Canvas
            Grid.Row="0"
            Grid.Column="1"
            Grid.ColumnSpan="2">
            <Ellipse
                x:Name="Ellipse0101"
                Canvas.Left="0"
                Width="10"
                Height="10"
                Fill="Red" />
            <Ellipse
                x:Name="Ellipse0102"
                Canvas.Left="0"
                Canvas.Top="20"
                Width="10"
                Height="10"
                Fill="Red" />
            <Path
                Stroke="Blue"
                StrokeDashArray="2 1"
                StrokeThickness="1">
                <Path.Data>
                    <PathGeometry>
                        <PathFigure>
                            <!--  控制点 * 2 , 终止点  -->
                            <BezierSegment
                                Point1="50 0"
                                Point2="50 30"
                                Point3="100 30" />
                            <BezierSegment
                                Point1="150 0"
                                Point2="150 30"
                                Point3="200 30" />
                        </PathFigure>
                    </PathGeometry>
                </Path.Data>
                <Path.RenderTransform>
                    <ScaleTransform ScaleX="2" ScaleY="2" />
                </Path.RenderTransform>
            </Path>
        </Canvas>

        <Canvas Grid.Row="1" Grid.Column="0">
            <Path
                x:Name="Path1001"
                Canvas.Left="10"
                Canvas.Top="10"
                Stroke="Blue"
                StrokeDashArray="2 1"
                StrokeThickness="2">
                <Path.Data>
                    <PathGeometry>
                        <PathFigure IsClosed="true">
                            <ArcSegment
                                Point="85 75"
                                Size="10 10"
                                SweepDirection="Clockwise" />
                            <ArcSegment
                                Point="100 200"
                                Size="15 10"
                                SweepDirection="Clockwise" />
                        </PathFigure>
                    </PathGeometry>
                </Path.Data>
            </Path>
            <Image x:Name="Image1001">
                <Image.Source>
                    <DrawingImage>
                        <DrawingImage.Drawing>
                            <GeometryDrawing Brush="DarkSeaGreen">
                                <GeometryDrawing.Geometry>
                                    <GeometryGroup>
                                        <EllipseGeometry
                                            Center="10 10"
                                            RadiusX="9"
                                            RadiusY="4" />
                                        <EllipseGeometry
                                            Center="10 10"
                                            RadiusX="4"
                                            RadiusY="9" />
                                    </GeometryGroup>
                                </GeometryDrawing.Geometry>
                                <GeometryDrawing.Pen>
                                    <Pen Brush="Black" Thickness="2" />
                                </GeometryDrawing.Pen>
                            </GeometryDrawing>
                        </DrawingImage.Drawing>
                    </DrawingImage>
                </Image.Source>
            </Image>
        </Canvas>

        <StackPanel
            Grid.Row="1"
            Grid.RowSpan="2"
            Grid.Column="1"
            Grid.ColumnSpan="2">
            <StackPanel Orientation="Horizontal">
                <Button
                    Margin="5,4"
                    Click="Btn_OnClickStart"
                    Content="Start" />
                <Button
                    Margin="5,4"
                    Click="Btn_OnClickStop"
                    Content="Stop" />
            </StackPanel>
            <Canvas x:Name="Canvas1101" Height="250" />
        </StackPanel>

    </Grid>
</Window>
