<Page
  x:Class="ConsumptionRecord.WPF.Views.LoginUc"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:extensions="clr-namespace:ConsumptionRecord.WPF.Extensions"
  xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:ui="http://materialdesigninxaml.net/winfx/xaml/themes"
  xmlns:vm="clr-namespace:ConsumptionRecord.WPF.ViewModels"
  Title="{Binding Title}"
  MinWidth="600"
  MinHeight="400"
  d:DataContext="{d:DesignInstance vm:LoginUcViewModel}"
  mc:Ignorable="d"
>
  <Grid>
    <Grid.ColumnDefinitions>
      <ColumnDefinition Width="1*" />
      <ColumnDefinition Width="1*" />
    </Grid.ColumnDefinitions>
    <ui:Snackbar
      x:Name="MessageBar"
      Grid.Column="0"
      Grid.ColumnSpan="2"
      VerticalAlignment="Bottom"
      MessageQueue="{ui:MessageQueue}"
    />
    <Rectangle
      Grid.Column="0"
      Width="Auto"
      Height="200"
      Margin="16,0"
      HorizontalAlignment="Stretch"
      VerticalAlignment="Center"
      Fill="DarkCyan"
    />
    <ui:Transitioner
      Grid.Column="1"
      Margin="48"
      SelectedIndex="{Binding SelectedIndex, FallbackValue=0}"
    >
      <ui:TransitionerSlide VerticalAlignment="Center">
        <StackPanel>
          <TextBlock Margin="0,8" FontSize="22" FontWeight="Bold" Text="登录" />
          <TextBox
            Margin="0,8"
            ui:HintAssist.Hint="输入账号"
            Text="{Binding UserLoginInfo.Email}"
          />
          <PasswordBox
            Margin="0,8"
            extensions:PasswordBoxHelper.Pwd="{Binding Pwd, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
            ui:HintAssist.Hint="输入密码"
            ui:TextFieldAssist.HasClearButton="True"
          >
            <i:Interaction.Behaviors>
              <extensions:PasswordBoxBehavior />
            </i:Interaction.Behaviors>
          </PasswordBox>
          <Button Margin="0,8" Command="{Binding LoginCommand}" Content="登录" />
          <Grid>
            <TextBlock Grid.Column="0" Text="注册账号">
              <i:Interaction.Triggers>
                <i:EventTrigger EventName="MouseLeftButtonDown">
                  <i:InvokeCommandAction
                    Command="{Binding ShowLoginPanelCommand}"
                    CommandParameter="1"
                  />
                </i:EventTrigger>
              </i:Interaction.Triggers>
            </TextBlock>
            <TextBlock HorizontalAlignment="Right" Text="忘记密码?">
              <i:Interaction.Triggers>
                <i:EventTrigger EventName="MouseLeftButtonDown">
                  <!--  TODO :  -->
                  <i:InvokeCommandAction />
                </i:EventTrigger>
              </i:Interaction.Triggers>
            </TextBlock>
          </Grid>
        </StackPanel>
      </ui:TransitionerSlide>
      <ui:TransitionerSlide>
        <StackPanel>
          <TextBlock Margin="0,8" FontSize="22" FontWeight="Bold" Text="注册" />
          <TextBox
            Margin="0,8"
            ui:HintAssist.Hint="姓名"
            Text="{Binding UserRegisteredInfo.UserName, Mode=TwoWay}"
          />
          <TextBox
            Margin="0,8"
            ui:HintAssist.Hint="输入账号"
            Text="{Binding UserRegisteredInfo.Email, Mode=TwoWay}"
          />
          <TextBox
            Margin="0,8"
            ui:HintAssist.Hint="输入密码"
            ui:TextFieldAssist.HasClearButton="True"
            Text="{Binding UserRegisteredInfo.Password, Mode=TwoWay}"
          />
          <TextBox
            Margin="0,8"
            ui:HintAssist.Hint="再次确认密码"
            Text="{Binding UserRegisteredInfo.ConfirmPassword, Mode=TwoWay}"
          />
          <Grid>
            <Grid.ColumnDefinitions>
              <ColumnDefinition Width="1*" />
              <ColumnDefinition Width="1*" />
            </Grid.ColumnDefinitions>
            <Button
              Grid.Column="0"
              Margin="0,0,2,0"
              Command="{Binding ShowLoginPanelCommand}"
              CommandParameter="0"
              Content="返回登录"
              Style="{StaticResource MaterialDesignOutlinedButton}"
            />
            <Button
              Grid.Column="1"
              Margin="2,0,0,0"
              Command="{Binding RegisteredCommand}"
              Content="注册"
            />
          </Grid>
        </StackPanel>
      </ui:TransitionerSlide>
    </ui:Transitioner>
  </Grid>
</Page>
