<Window
  x:Class="ConsumptionRecord.WPF.Views.MainWindow"
  xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
  xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
  xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
  xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
  xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
  xmlns:models="clr-namespace:ConsumptionRecord.WPF.Models"
  xmlns:prism="http://prismlibrary.com/"
  xmlns:ui="http://materialdesigninxaml.net/winfx/xaml/themes"
  xmlns:vm="clr-namespace:ConsumptionRecord.WPF.ViewModels"
  x:Name="Root"
  Title="MainWindow"
  Width="1200"
  Height="700"
  d:DataContext="{d:DesignInstance Type=vm:MainWindowViewModel}"
  prism:ViewModelLocator.AutoWireViewModel="True"
  Background="{DynamicResource MaterialDesignPaper}"
  TextElement.Foreground="{DynamicResource MaterialDesignBody}"
  WindowStartupLocation="CenterScreen"
  mc:Ignorable="d"
>
  <WindowChrome.WindowChrome>
    <WindowChrome GlassFrameThickness="0" />
  </WindowChrome.WindowChrome>
  <ui:DialogHost
    DialogTheme="Inherit"
    Identifier="RootDialog"
    SnackbarMessageQueue="{Binding ElementName=MainSnackbar, Path=MessageQueue}"
  >
    <ui:DrawerHost IsLeftDrawerOpen="{Binding ElementName=MenuToggleButton, Path=IsChecked}">
      <ui:DrawerHost.LeftDrawerContent>
        <DockPanel MinWidth="220">
          <StackPanel DockPanel.Dock="Top">
            <Image Width="24" Height="24" Margin="0,16" Source="../Resources/Images/AppIco.ico" />
          </StackPanel>
          <ListBox
            x:Name="MenuListBox"
            ItemContainerStyle="{StaticResource LeftMenuStyle}"
            ItemsSource="{Binding LeftMenuInfos}"
          >
            <i:Interaction.Triggers>
              <i:EventTrigger EventName="SelectionChanged">
                <i:InvokeCommandAction
                  Command="{Binding NavigateCommand}"
                  CommandParameter="{Binding ElementName=MenuListBox, Path=SelectedItem}"
                />
                <i:InvokeCommandAction Command="{Binding ElementName=Root, Path=LeftMenuItemSelectCommand}" />
              </i:EventTrigger>
            </i:Interaction.Triggers>
            <ListBox.ItemTemplate>
              <DataTemplate DataType="{x:Type models:LeftMenuInfo}">
                <StackPanel
                  HorizontalAlignment="Stretch"
                  VerticalAlignment="Center"
                  Orientation="Horizontal"
                >
                  <ui:PackIcon Margin="16,0" Kind="{Binding Icon}" />
                  <TextBlock Text="{Binding MenuName}" />
                </StackPanel>
              </DataTemplate>
            </ListBox.ItemTemplate>
          </ListBox>
        </DockPanel>
      </ui:DrawerHost.LeftDrawerContent>
      <DockPanel>
        <ui:ColorZone
          Padding="16"
          ui:ElevationAssist.Elevation="Dp4"
          DockPanel.Dock="Top"
          Mode="PrimaryMid"
        >
          <Grid>
            <!--  标头  -->
            <StackPanel HorizontalAlignment="Left" Orientation="Horizontal">
              <ToggleButton
                x:Name="MenuToggleButton"
                AutomationProperties.Name="HamburgerToggleButton"
                IsChecked="False"
                Style="{StaticResource MaterialDesignHamburgerToggleButton}"
              />
              <Button
                Margin="24,0,0,0"
                Command="{Binding GoBackCommand}"
                Content="{ui:PackIcon Kind=ArrowLeft,
                                                      Size=24}"
                Style="{StaticResource MaterialDesignFlatMidBgButton}"
                ToolTip="返回"
              />
              <Button
                Margin="16,0,0,0"
                Command="{Binding GoForwardCommand}"
                Content="{ui:PackIcon Kind=ArrowRight,
                                                      Size=24}"
                Style="{StaticResource MaterialDesignFlatMidBgButton}"
                ToolTip="下一步"
              />
              <TextBlock
                Margin="16,0,0,0"
                HorizontalAlignment="Center"
                VerticalAlignment="Center"
                FontSize="22"
                Text="账单记录"
              />
            </StackPanel>
            <!--  功能键  -->
            <StackPanel HorizontalAlignment="Right" DockPanel.Dock="Right" Orientation="Horizontal">
              <Button
                Margin="16,0"
                Content="{ui:PackIcon Kind=Microsoft,
                                                      Size=24}"
                Style="{StaticResource MaterialDesignToolButton}"
              />
              <Button
                Command="{Binding ElementName=Root, Path=MinWindowCommand}"
                Content="{ui:PackIcon Kind=WindowMinimize}"
                Style="{StaticResource MaterialDesignFlatMidBgButton}"
              />
              <Button
                Command="{Binding ElementName=Root, Path=MaxWindowCommand}"
                Content="{ui:PackIcon Kind=WindowMaximize}"
                Style="{StaticResource MaterialDesignFlatMidBgButton}"
              />
              <Button
                Command="{Binding ElementName=Root, Path=CloseWindowCommand}"
                Content="{ui:PackIcon Kind=WindowClose}"
                Style="{StaticResource MaterialDesignFlatMidBgButton}"
              />
            </StackPanel>
          </Grid>
        </ui:ColorZone>
        <!--  主内容区域  -->
        <ContentControl prism:RegionManager.RegionName="MainViewRegion" />
      </DockPanel>
    </ui:DrawerHost>
  </ui:DialogHost>
</Window>
